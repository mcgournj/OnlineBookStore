<html>
  <head><title>test table</title>
  
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>


    <script type ="text/javascript">

           function buildTable(xdata) {
             var tmp = '<table border=1>';

             alert('Processing returned JSON data');

             for (var i=0;i<xdata.length;i++) {
               tmp = tmp +'<tr>';
                 tmp = tmp + '<td>' + xdata[i].book.price         + '</td>';
                 tmp = tmp + '<td>' + xdata[i].book.title         + '</td>';
                 tmp = tmp + '<td><a href=# onclick=\"alert('+ i +')\">View</a></td>'; 
               tmp = tmp + '</tr>';
             }

             tmp = tmp + '</table>';

             alert('About to insert Table into DOM in content Div');

             $('#content').html(tmp);      
             
           }


           $(document).ready(function() {

             alert('Attach a JQuery Live event to the button'); 
             $('#getdata-button').live('click', function() { 

               alert("Invoking getJSONP function"); 
               $.getJSON('http://localhost:3000/getjson/1?callback=?', function(xdata) {    
                 alert(xdata);                                                
                 buildTable(xdata);

               });
             });
           });
   

            
    </script>

  </head>
  
  <body>

    <a href="#" id="getdata-button">Get JSON Data using JSONP</a>
    <br/><br/>
    <div id="content">JSON Data Will Appear Here</div>  



    
  </body>
</html>

