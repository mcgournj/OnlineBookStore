<html>
<head><title>test table</title>
  <link rel="stylesheet" href="/css/base.css" type="text/css" media="all" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
</head>
<body>
  <div id="content">

  <script type ="text/javascript">

           function buildTable(xdata) {
                  var tmp = '<table border=1>';

                  alert('Processing returned JSON data');

                  for (var i=0;i<xdata.length;i++)
                  {
                    tmp = tmp +'<tr>';
                    tmp = tmp + '<td>' + xdata[i].book.price         + '</td>';
                    tmp = tmp + '<td>' + xdata[i].book.title         + '</td>';
                    tmp = tmp + '<td><a href=# onclick=\"alert('+ i +')\">View</a></td>'; 
                    tmp = tmp + '</tr>';
                  }

                  tmp = tmp + '</table>';

                  alert('About to insert Table into DOM in content Div');

                  $('#showdata').html(tmp);

           }

           $(document).ready(function() { 
                               alert("Invoking getJson function");    
                               $.getJSON('http://localhost:3000/getjson/1', function(xdata) { 
                                 alert(xdata[0].book.price);                                    
                                 buildTable(xdata);

                               });
                             });


            
  </script>

 
  <div id="showdata"></div>

    
</body>
</html>

